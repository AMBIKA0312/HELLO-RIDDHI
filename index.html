<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bestie Story â€” One File</title>

<style>
  :root{
    --bg1: linear-gradient(135deg,#d66bff,#ff93d3,#ffe4fa);
    --accent:#c428ff;
    --accent-dark:#9c00d4;
    --card:#fff0f5;
    --text:#4b003b;
  }
  html,body{height:100%;margin:0;padding:0}
  body{
    font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    background:var(--bg1);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow:auto;
  }

  /* floating ornament */
  .bg-ornament::before{
    content:"ðŸ’œ âœ¨ ðŸ’– ðŸŒ¸ ðŸ’• âœ¨ ðŸ’—";
    position:fixed;
    left:0;right:0;
    top:8%;
    font-size:5.5rem;
    text-align:center;
    opacity:0.08;
    transform:translateY(0);
    animation:floatUp 18s linear infinite;
    pointer-events:none;
  }
  @keyframes floatUp{0%{transform:translateY(0)}100%{transform:translateY(-360px)}}

  /* card */
  .card{
    width:100%;
    max-width:760px;
    background:rgba(255,255,255,0.97);
    border-radius:18px;
    box-shadow:0 18px 50px rgba(120,30,140,0.16);
    padding:20px;
    text-align:center;
    color:var(--text);
    max-height:92vh;
    overflow:auto;
  }

  /* slide area */
  .slide{
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    padding:8px 12px 8px 12px;
    gap:6px;
    min-height:120px;
  }
  .slide h1{
    margin:0;
    font-size:1.6rem;
    color:var(--accent);
    line-height:1.12;
  }
  .slide .sub{
    margin:0;
    color:#7a0068;
    font-weight:600;
    font-size:1rem;
  }

  /* tighter gap for chapters */
  .chapter{
    text-align:left;
    background:linear-gradient(180deg,#fff7fb,#fff0f5);
    border-radius:12px;
    padding:12px;
    box-shadow:0 8px 24px rgba(200,60,160,0.06);
    max-width:720px;
    margin:0 auto;
    margin-top:8px;
  }
  .chapter h2{margin:0;color:#c300a8;font-size:1.05rem}
  .chapter p{margin:8px 0 0 0;color:#4b003b;line-height:1.35}

  /* small GIFs */
  .gif-inline{width:86px;height:auto;margin-top:6px;border-radius:10px}
  .gif-final{width:170px;max-width:45%;height:auto;margin-top:10px}

  /* input */
  .answer-row{margin-top:8px;display:flex;justify-content:center}
  input.answer{
    padding:10px 12px;
    width:84%;
    max-width:520px;
    border-radius:10px;
    border:2px solid rgba(196,80,200,0.5);
    outline:none;
    font-size:1rem;
    text-align:center;
    background:white;
  }
  .hint{font-size:0.84rem;color:#b2006e;margin-top:6px}

  /* message */
  .message{margin-top:12px;font-weight:700;color:#d40057;min-height:26px}

  /* controls */
  .controls{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:14px}
  .btn{
    background:var(--accent);
    color:white;
    padding:10px 16px;
    border-radius:999px;
    border:none;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(140,30,200,0.12);
    transition:transform .12s ease,background .12s ease;
  }
  .btn:hover{transform:translateY(-4px);background:var(--accent-dark)}
  .btn.ghost{background:transparent;color:var(--accent);border:2px solid rgba(196,80,200,0.18);box-shadow:none}
  .btn.small{padding:8px 12px;font-size:0.95rem}
  .btn.hidden{display:none}

  /* subtle animations */
  .fadeIn{animation:fadeIn .45s ease both}
  @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

  /* confetti pop (on correct answer) */
  .confetti {
    position:fixed;
    left:50%;
    top:8%;
    transform:translateX(-50%);
    pointer-events:none;
    z-index:1000;
    opacity:0;
    transition:opacity .3s ease;
  }
  .confetti.show{opacity:1;animation:confettiPop 1.2s linear;}
  @keyframes confettiPop{
    0%{transform:translateX(-50%) translateY(-20px) scale(.8)}
    100%{transform:translateX(-50%) translateY(0) scale(1)}
  }

  /* responsive */
  @media (max-width:720px){
    .card{padding:16px}
    .slide h1{font-size:1.35rem}
    input.answer{width:88%}
  }
  @media (max-width:420px){
    .card{padding:14px;border-radius:14px}
    .gif-inline{width:66px}
    .gif-final{width:140px}
  }
</style>
</head>
<body class="bg-ornament">

  <div class="card" id="app" role="application" aria-labelledby="mainTitle">
    <div id="slideArea" class="slide fadeIn">
      <h1 id="mainTitle">HELLO EVERYONE'S BESTIE</h1>
      <div class="sub">answer one question</div>
      <!-- small sparkle GIF under title for visual pop -->
      <img src="https://i.imgur.com/6XgKQ6l.gif" alt="sparkle" class="gif-inline" />
    </div>

    <div id="contentArea" style="margin-top:6px"></div>
    <div id="message" class="message" aria-live="polite"></div>

    <div class="controls" id="controls">
      <button class="btn" id="nextBtn">Next âžœ</button>
      <!-- dynamic buttons injected here -->
    </div>
  </div>

  <!-- confetti GIF (hidden, shown on correct answer) -->
  <img id="confetti" class="confetti" src="https://i.imgur.com/4M7IWwP.gif" alt="confetti" />

<script>
/* ---------- Slides data (updated exactly per your instructions) ---------- */
const slides = [
  { type:'intro', title:"HELLO EVERYONE'S BESTIE", subtitle:"answer one question", gif:'https://i.imgur.com/6XgKQ6l.gif' },
  { type:'info', title:"Get ready", subtitle:"press next for question", gif:'https://i.imgur.com/6XgKQ6l.gif' },
  { type:'input', title:"Which serial best describes our relationship?", subtitle:"(Type the answer in ALL CAPITALS)" },

  { type:'chapter', id:'CH01', heading:'CH01: Strangers', body:"Meet Riddhi â€” who was never in hostel and made a (thankfully now is an ex) boyfriend in 10 days." },
  { type:'chapter', id:'CH02', heading:'CH02: JUST FRIENDS', body:"Hey Ambika â€” listen, Prince is not a good guy (as if I didn't know). Don't spend time with him (as if I was spending)." },
  { type:'chapter', id:'CH03', heading:'CH03: ELDER SISTER', body:"I don't know why I even said you are my elder sister when I was always the one doing all the thinking and now cooking too." },
  { type:'chapter', id:'CH04', heading:'CH04: ARE THEY JUST FRIENDS?', body:"EVERYONE: Aren't they always together like glued to each other? Are they just friends? (Nothing serious â€” just personal thinking. Flirting with you was not that bad â€” or should I say it was good. By the way the last part was a joke.)" },
  { type:'chapter', id:'CH05', heading:'CH05: LIFE LONG OGGY & COCKROACH', body:"It's the only thing that's 100% true about us (except you being everyone's bestie). And personally it is the best thing I like about us (except some 1 2 4 5 ... 1000 or more things but those all are about me)." },

  { type:'text', title:"What now? Ho gaya. Khatam. Tata. Bye bye." },
  { type:'text', title:"Be updated with writer Ambika to get new chapters unlocked", subtitle:'' },

  // single slide containing the "main chiz" line (merged into one slide)
  { type:'text', title:"By the way tumhare chakkar me main chiz bhul gaye na. Bad girl." },

  // branch question slide: Do you want to know...
  { type:'branch_question', title:"Do you want to know what the main chiz is?" },

  // the favourite-food joke slide (only one slide)
  { type:'text', title:"By the way agar mere favourite foods hote to definitely gajar ka halwa in that list would be very high (specially made by you.... just joking)" },

  { type:'text', title:"Jokes apart â€” ye birthday literally kaafi achha tha, like the best till now (itna achha ki laga thankfully hum hostel me the)" },

  { type:'text', title:"THANK YOU SO MUCH FOR BEING ONE OF THE MOST IMPORTANT REASONS FOR SUCH A GOOD BIRTHDAY (By the way ye joke hi tha)" },

  // single "BYE BYE" slide without Next button
  { type:'final', title:"BYE BYE ðŸ‘‹ðŸ’ž", gif:'https://i.imgur.com/0y0R2vH.gif' }
];

let idx = 0;

// DOM refs
const slideArea = document.getElementById('slideArea');
const contentArea = document.getElementById('contentArea');
const messageArea = document.getElementById('message');
const controls = document.getElementById('controls');
const nextBtn = document.getElementById('nextBtn');
const confetti = document.getElementById('confetti');

function clearAreas(){
  contentArea.innerHTML = '';
  messageArea.textContent = '';
  // remove any dynamic control buttons except Next
  Array.from(controls.querySelectorAll('.dynamic')).forEach(el=>el.remove());
}

// escape html helper
function escapeHtml(s){ return (s||'').toString().replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m])); }

function render(){
  clearAreas();
  const s = slides[idx];

  // If final slide (no Next)
  if(s.type==='final'){
    slideArea.innerHTML = `<h1 class="fadeIn">${escapeHtml(s.title)}</h1>`;
    if(s.gif){
      const img = document.createElement('img'); img.src = s.gif; img.alt='bye'; img.className='gif-final fadeIn';
      contentArea.appendChild(img);
    }
    // Hide Next button on final slide
    nextBtn.style.display = 'none';
    return;
  }

  // common for normal slides
  if(s.type==='intro' || s.type==='info'){
    slideArea.innerHTML = `<h1 class="fadeIn">${escapeHtml(s.title)}</h1><div class="sub">${escapeHtml(s.subtitle||'')}</div>`;
    if(s.gif){
      const img = document.createElement('img'); img.src = s.gif; img.alt='sparkle'; img.className='gif-inline fadeIn';
      contentArea.appendChild(img);
    }
    nextBtn.style.display = 'inline-block';
  }
  else if(s.type==='input'){
    slideArea.innerHTML = `<h1 class="fadeIn">${escapeHtml(s.title)}</h1><div class="sub">${escapeHtml(s.subtitle||'')}</div>`;
    // input UI
    const row = document.createElement('div'); row.className='answer-row fadeIn';
    row.innerHTML = `<input id="answerBox" class="answer" type="text" inputmode="text" placeholder="TYPE IN ALL CAPITALS">`;
    contentArea.appendChild(row);
    const hint = document.createElement('div'); hint.className='hint'; hint.textContent='Write the answer IN ALL CAPITALS';
    contentArea.appendChild(hint);
    // add submit button as dynamic control
    const submit = document.createElement('button'); submit.className='btn dynamic'; submit.textContent='Submit';
    submit.addEventListener('click', handleInputSubmit);
    controls.appendChild(submit);
    nextBtn.style.display = 'none'; // only appear after correct
  }
  else if(s.type==='chapter'){
    slideArea.innerHTML = `<h1 class="fadeIn">${escapeHtml(s.heading)}</h1>`;
    const box = document.createElement('div'); box.className='chapter fadeIn';
    box.innerHTML = `<h2>${escapeHtml(s.heading)}</h2><p>${escapeHtml(s.body)}</p>`;
    contentArea.appendChild(box);
    nextBtn.style.display = 'inline-block';
  }
  else if(s.type==='text'){
    slideArea.innerHTML = `<h1 class="fadeIn">${escapeHtml(s.title)}</h1>`;
    nextBtn.style.display = 'inline-block';
  }
  else if(s.type==='branch_question'){
    slideArea.innerHTML = `<h1 class="fadeIn">${escapeHtml(s.title)}</h1>`;
    // yes/no buttons appear under controls
    const yes = document.createElement('button'); yes.className='btn dynamic'; yes.textContent='Yes ðŸ˜˜';
    const no = document.createElement('button'); no.className='btn ghost dynamic'; no.textContent='No ðŸ˜';
    controls.appendChild(yes); controls.appendChild(no);
    nextBtn.style.display = 'none'; // will show after response
    yes.addEventListener('click', function(){
      // show the favourite-food joke (single slide content) immediately in message area
      messageArea.style.color='#a300c5';
      messageArea.innerHTML = slides.find(sl=>sl.type==='text' && sl.title && sl.title.startsWith('By the way agar')).title;
      // show Next so user can continue
      nextBtn.style.display = 'inline-block';
    });
    no.addEventListener('click', function(){
      messageArea.style.color='red';
      messageArea.innerHTML = 'Priority matters. Choose:';
      // add try again and continue options
      const tryAgain = document.createElement('button'); tryAgain.className='btn dynamic small'; tryAgain.textContent='Try Again';
      const skip = document.createElement('button'); skip.className='btn ghost dynamic small'; skip.textContent='Skip';
      controls.appendChild(tryAgain); controls.appendChild(skip);
      tryAgain.addEventListener('click', function(){ messageArea.textContent=''; render(); });
      skip.addEventListener('click', function(){
        messageArea.style.color='#a300c5';
        messageArea.innerHTML = slides.find(sl=>sl.type==='text' && sl.title && sl.title.startsWith('By the way agar')).title;
        nextBtn.style.display='inline-block';
      });
    });
  }
}

// handle submit for serial question
function handleInputSubmit(){
  const box = document.getElementById('answerBox');
  if(!box) return;
  const val = box.value.trim().toUpperCase();
  const correct = "YEH RISHTA KYA KEHLATA HAI";
  if(val === correct){
    messageArea.style.color='green';
    messageArea.textContent = "PERFECT ANSWER BESTIEEE ðŸ˜˜ðŸ”¥";
    // remove submit and allow next
    Array.from(controls.querySelectorAll('.dynamic')).forEach(el=>el.remove());
    // show confetti briefly
    confetti.classList.add('show');
    setTimeout(()=>confetti.classList.remove('show'),1400);
    nextBtn.style.display = 'inline-block';
  } else {
    const playful = [
      "Ayyooo wrong! ðŸ˜‚ Try again ðŸ’€",
      "Bestieee you watch serials or not?? ðŸ˜­",
      "Naahhhh! You can do better ðŸ¤£",
      "WRONG! This is why you fail GK tests ðŸ˜‚ðŸ’”",
      "Nope! Thatâ€™s not it â€” think again babe! ðŸ˜‰"
    ];
    const msg = playful[Math.floor(Math.random()*playful.length)];
    messageArea.style.color='#d40057';
    messageArea.textContent = msg;
    // small shake on input
    box.animate([{transform:'translateX(0)'},{transform:'translateX(-8px)'},{transform:'translateX(8px)'},{transform:'translateX(0)'}],{duration:360});
  }
}

// next button flow
nextBtn.addEventListener('click', function(){
  // if current is branch_question and next visible, proceed
  if(slides[idx] && slides[idx].type==='branch_question'){
    idx++;
    render();
    return;
  }
  idx++;
  if(idx >= slides.length) idx = slides.length - 1;
  render();
});

// initial render
render();

</script>
</body>
</html>
